#!/bin/sh

#for num_nodes in 2 3 4 5; do
for num_nodes in 4; do
	echo "----------------------------------------"
	echo "Running for no. of nodes = $num_nodes"
	echo "----------------------------------------"
	ulimit -c unlimited
	ulimit -c
	./src/apps/discovery/discovery-test --network 127.0.0.1/8 --role master --num-peers $num_nodes #--kill 10
	t=$(cat time.log)
#	echo "$num_nodes,$t" >> time-degraded.csv
	echo "$num_nodes,$t" >> time.csv
	echo "----------------------------------------"
	echo "Total time=$t"
	echo "----------------------------------------"
	secs=10
	echo "----------------------------------------"
	echo "Sleeping for $secs seconds"
	echo "----------------------------------------"
	sleep $secs
done
